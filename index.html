<!DOCTYPE html>
<html lang="en">
<head>
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "tu0ydq1eb7");
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loan Dashboard</title>
  <style>
    body{font-family:Inter,system-ui,sans-serif;background:#f9fafb;margin:0;color:#111}
    .container{max-width:1100px;margin:40px auto;background:white;border-radius:10px;
      box-shadow:0 2px 8px rgba(0,0,0,0.05);padding:30px}
    h1{margin-top:0;font-size:22px}
    table{width:100%;border-collapse:collapse;margin-top:20px;font-size:14px}
    th,td{padding:12px 14px;border-bottom:1px solid #eee;text-align:left}
    th{background:#f1f5f9}
    .status{border-radius:6px;padding:5px 10px;font-weight:600;font-size:12px;display:inline-block}
    .approved{background:#ecfdf5;color:#047857}
    .rejected{background:#fef2f2;color:#b91c1c}
    .onhold{background:#fefce8;color:#92400e}
    .btn{background:#2563eb;color:white;border:none;border-radius:6px;padding:6px 10px;cursor:pointer}
    .btn:hover{background:#1d4ed8}
  </style>
</head>
<body>
  <div class="container">
    <h1>Loan Dashboard</h1>
    <table id="loanTable">
      <thead>
        <tr>
          <th>Loan ID</th><th>Borrower</th><th>Amount</th><th>APR</th>
          <th>Status</th><th>Updated</th><th></th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    /* Hard-coded demo data */
    const LOANS=[
      {id:"LN-10027",borrower:"Rahul Sharma",amount:1250000,apr:11.75,status:"Approved",
        updatedAt:"2025-10-14",business:"Sharma Textiles",ownership:"80%",startDate:"2015-04-12",
        revenueDesc:"Retail textile sales in Chennai",notes:"Pre-approved subject to property valuation."},
      {id:"LN-10028",borrower:"Priya Natarajan",amount:350000,apr:16.2,status:"On Hold",
        updatedAt:"2025-10-15",business:"Natarajan Foods",ownership:"100%",startDate:"2019-06-10",
        revenueDesc:"Local food manufacturing unit",notes:"Awaiting latest bank statements."},
      {id:"LN-10029",borrower:"Ankit Verma",amount:890000,apr:13.5,status:"Rejected",
        updatedAt:"2025-10-09",business:"Verma Auto Parts",ownership:"60%",startDate:"2018-09-20",
        revenueDesc:"Sells car parts wholesale",notes:"Credit score below threshold."}
    ];

    const tbody=document.querySelector("#loanTable tbody");
    function formatINR(n){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(n);}
    LOANS.forEach(l=>{
      const tr=document.createElement("tr");
      tr.innerHTML=`
        <td>${l.id}</td>
        <td>${l.borrower}</td>
        <td>${formatINR(l.amount)}</td>
        <td>${l.apr}%</td>
        <td><span class="status ${l.status.toLowerCase().replace(' ','')}">${l.status}</span></td>
        <td>${new Date(l.updatedAt).toLocaleDateString()}</td>
        <td><button class="btn" onclick="viewLoan('${l.id}')">View</button></td>`;
      tbody.appendChild(tr);
    });

    function viewLoan(id) {
  // Track click in Clarity
  if (window.clarity) clarity("event", "view_details_clicked", { loan_id: id });

  localStorage.setItem("selectedLoan", JSON.stringify(LOANS.find(l => l.id === id)));
  window.location.href = "loan.html";
}
  </script>
</body>
</html>
